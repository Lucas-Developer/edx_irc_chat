<script>
function getContentInContainer(matchClass) {
    var elems = document.getElementsByTagName('*'), i;
    for (i in elems) {
        if((' ' + elems[i].className + ' ').indexOf(' ' + matchClass + ' ')
                > -1) {
            return elems[i].textContent;
        }
    }
}
  
if (document.getElementById('chatiframe')) {
  username = getContentInContainer("user-link").replace("Dashboard for:", "").replace(/^\s+|\s+$/g, '');
  document.getElementById('chatiframe').src += "&nick=" + encodeURI(username);
} else {
  window.onload = init;
}

function init(){
  username = getContentInContainer("user-link").replace("Dashboard for:", "").replace(/^\s+|\s+$/g, '');
  document.getElementById('chatiframe').src += "&nick=" + encodeURI(username);
}

function showDelayed(delaySeconds, element, elementHide) {
  setTimeout(function(){
    element.style.position='static';
    element.style.visibility='visible';
    document.getElementById(elementHide).style.display='none';
  }, 1000*delaySeconds);
}
</script>

<p><span id="loadingchat">Loading chat...</span>
<iframe id="chatiframe" style="position: absolute; top: -9999em; visibility: hidden;" onload="showDelayed(5,this,'loadingchat');"  src="http://cs1692x.moocforums.org:9090/?channels=%23cs1692x" height="300" width="100%"></iframe></p>
